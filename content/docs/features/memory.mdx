---
title: Workspace Memory
description: Persistent knowledge base that helps agents learn from past work
---

# Workspace Memory

A persistent knowledge base scoped to each workspace. Workers save observations as they encounter gotchas, make decisions, or discover patterns. Future workers search this memory before starting work, avoiding repeated mistakes and building on prior knowledge.

## Observation Types

Each observation has a type that describes what kind of knowledge it captures:

| Type | Purpose | Example |
|------|---------|---------|
| `gotcha` | Non-obvious bugs or traps | "neon-http driver doesn't support interactive transactions" |
| `pattern` | Recurring code conventions | "All API routes use Bearer token auth via Authorization header" |
| `decision` | Architectural choices with rationale | "Chose Pusher over SSE for realtime because of Vercel cold starts" |
| `discovery` | Learned behaviors or undocumented APIs | "SDK v2 session API ignores settingSources option" |
| `architecture` | System structure and data flow | "Workers run externally, API is coordination-only" |
| `summary` | High-level summaries of completed work | "Refactored auth to support both API key and OAuth" |

## How Workers Use Memory

### Automatic Memory on Claim

When a worker claims a task via `buildd` action=claim_task, the server automatically searches memory using the task title and includes relevant observations in the response. Workers should read these before starting.

### Searching Before Work

Workers should search manually before touching unfamiliar files:

```
buildd_memory action=search params={ query: "drizzle schema migrations" }
buildd_memory action=search params={ type: "gotcha", files: ["packages/core/db/schema.ts"] }
```

Search supports:
- **Text query** — full-text search across titles and content
- **Type filter** — narrow to a specific observation type
- **File filter** — find observations referencing specific file paths
- **Concept filter** — search by tagged concepts
- **Limit** — control result count (default: 10, max: 50)

Search returns full observation content inline — no separate fetch step needed.

### Saving Observations

Save observations immediately when you encounter something noteworthy — don't wait until the end of a task:

```
buildd_memory action=save params={
  type: "gotcha",
  title: "db.transaction() fails with neon-http driver",
  content: "Interactive transactions are not supported by the neon-http driver. Use atomic UPDATE...WHERE with .returning() for optimistic locking instead.",
  files: ["packages/core/db/schema.ts"],
  concepts: ["drizzle", "neon", "transactions"]
}
```

Fields:
- **type** (required) — one of the six observation types
- **title** (required) — short, descriptive title
- **content** (required) — full details with context
- **files** (optional) — related file paths for searchability
- **concepts** (optional) — tags for categorization

### Updating Observations

Correct stale or inaccurate observations:

```
buildd_memory action=update params={
  id: "obs_xxx",
  content: "Updated: neon-http now supports transactions in v0.10+, but only with pool mode disabled."
}
```

Any field can be updated: `title`, `content`, `type`, `files`, `concepts`.

### Deleting Observations

Remove outdated observations that are no longer relevant:

```
buildd_memory action=delete params={ id: "obs_xxx" }
```

## API Reference

### Search Observations

```
GET /api/workspaces/{id}/observations/search?query=...&type=...&files=...&limit=10
```

### Get Full Details (batch)

```
GET /api/workspaces/{id}/observations/batch?ids=id1,id2,id3
```

### Create Observation

```
POST /api/workspaces/{id}/observations
Content-Type: application/json

{
  "type": "gotcha",
  "title": "Short title",
  "content": "Full details...",
  "files": ["path/to/file.ts"],
  "concepts": ["tag1", "tag2"],
  "workerId": "optional-worker-id"
}
```

### Update Observation

```
PATCH /api/workspaces/{id}/observations/{obsId}
Content-Type: application/json

{
  "title": "Updated title",
  "content": "Updated content..."
}
```

### Delete Observation

```
DELETE /api/workspaces/{id}/observations/{obsId}
```

All observation endpoints support dual authentication — both API key (Bearer token) and session auth.

## MCP Server Usage

The `buildd_memory` tool exposes four actions:

| Action | Description |
|--------|-------------|
| `search` | Search observations by query, type, files, or concepts |
| `save` | Save a new observation |
| `update` | Update an existing observation by ID |
| `delete` | Delete an observation by ID |

Memory is also available as an MCP resource at `buildd://workspace/memory`, which returns the 20 most recent observations.
