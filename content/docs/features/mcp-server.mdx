---
title: MCP Server
description: Claude Code integration via Model Context Protocol
---

# MCP Server

The Buildd MCP server integrates with Claude Code, providing task coordination and workspace memory directly in your coding workflow.

Two connection modes are available:

- **Local (stdio)** — runs as a subprocess, supports filesystem access for skill registration
- **Remote (Streamable HTTP)** — connects over HTTP, no local installation needed

## Setup

### Recommended: `buildd login`

The easiest setup — auto-configures the local MCP server:

```bash
curl -fsSL https://buildd.dev/install.sh | bash
buildd login
```

After login, restart Claude Code and the buildd tools will be available.

### Alternative: Manual `.mcp.json`

**Local (stdio):**

```json
{
  "mcpServers": {
    "buildd": {
      "command": "bun",
      "args": ["run", "~/.buildd/apps/mcp-server/src/index.ts"],
      "env": {
        "BUILDD_WORKSPACE": "optional-workspace-id"
      }
    }
  }
}
```

The API key is read from `~/.buildd/config.json` automatically.

**Remote (HTTP):**

```bash
claude mcp add --transport http buildd https://buildd.dev/api/mcp \
  --header "Authorization: Bearer bld_your_api_key"
```

Or manually in `.mcp.json`:

```json
{
  "mcpServers": {
    "buildd": {
      "type": "http",
      "url": "https://buildd.dev/api/mcp",
      "headers": {
        "Authorization": "Bearer bld_your_api_key"
      }
    }
  }
}
```

The remote server does not support `filePath` or `repo` params for `register_skill` (no filesystem access). Use the `content` param instead.

### Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `BUILDD_API_KEY` | Yes* | API key for authentication |
| `BUILDD_SERVER` | No | Server URL (default: `https://buildd.dev`) |
| `BUILDD_WORKSPACE_ID` | No | Force a specific workspace |
| `BUILDD_WORKER_ID` | No | Worker context (set automatically when claiming tasks) |

\* Falls back to `apiKey` in `~/.buildd/config.json` if not set.

## Workspace Detection

The MCP server automatically detects which workspace to use:

1. `BUILDD_WORKSPACE_ID` env var (highest priority)
2. Git remote URL — reads `git remote get-url origin` and looks up the workspace by repo name
3. No filter — operations that require a workspace will prompt for `workspaceId`

## Tools

The server exposes two tools: `buildd` for task coordination and `buildd_memory` for workspace knowledge. Both use an `action` parameter to select the operation.

### `buildd` — Task Coordination

Available actions depend on your account level (detected automatically from your API key).

#### Worker Actions (all accounts)

| Action | Key Params | Description |
|--------|-----------|-------------|
| `list_tasks` | `offset?` | List pending tasks sorted by priority |
| `claim_task` | `maxTasks?, workspaceId?` | Auto-claim highest-priority pending task |
| `update_progress` | `workerId, progress, message?` | Report progress (0-100%) |
| `complete_task` | `workerId, summary?, error?` | Mark task done or failed |
| `create_pr` | `workerId, title, head` | Create a GitHub PR tracked on the worker |
| `update_task` | `taskId, title?, description?, priority?` | Update task fields or dependencies |
| `create_task` | `title, description, workspaceId?` | Create a new task |
| `create_artifact` | `workerId, type, title, content?` | Create a shareable artifact |
| `list_artifacts` | `workspaceId?, key?, type?` | List workspace artifacts |
| `update_artifact` | `artifactId, title?, content?` | Update an existing artifact |
| `review_workspace` | `hoursBack?, workspaceId?` | Review recent task quality |
| `emit_event` | `workerId, type, label, metadata?` | Record a custom milestone event |
| `query_events` | `workerId, type?` | Read events from worker timeline |

#### Admin Actions (admin-level API key only)

| Action | Key Params | Description |
|--------|-----------|-------------|
| `create_schedule` | `name, cronExpression, title` | Create a recurring schedule |
| `update_schedule` | `scheduleId, cronExpression?` | Update a schedule |
| `list_schedules` | `workspaceId?` | List all schedules |
| `register_skill` | `name?, content?, filePath?, repo?` | Register a workspace skill |

#### Examples

```
# Claim a task
buildd action=claim_task

# Report progress
buildd action=update_progress params={ workerId: "...", progress: 50, message: "Implemented auth middleware" }

# Create a PR and complete
buildd action=create_pr params={ workerId: "...", title: "feat: add auth", head: "feat/auth" }
buildd action=complete_task params={ workerId: "...", summary: "Added JWT auth middleware" }

# Submit a plan for review
buildd action=update_progress params={ workerId: "...", plan: "1. Add middleware\n2. Update routes\n3. Add tests" }

# Record a custom event
buildd action=emit_event params={ workerId: "...", type: "deploy", label: "Deployed to staging" }
```

### `buildd_memory` — Workspace Knowledge

| Action | Key Params | Description |
|--------|-----------|-------------|
| `search` | `query?, type?, files?, concepts?, limit?` | Search observations |
| `save` | `type, title, content, files?, concepts?` | Save a new observation |
| `update` | `id, title?, content?, type?, files?, concepts?` | Update an existing observation |
| `delete` | `id` | Delete an observation |

#### Examples

```
# Search for relevant context
buildd_memory action=search params={ query: "drizzle migrations", type: "gotcha" }

# Save an observation
buildd_memory action=save params={ type: "gotcha", title: "neon-http no transactions", content: "..." }

# Update a stale observation
buildd_memory action=update params={ id: "obs_xxx", content: "Updated guidance..." }

# Remove outdated observation
buildd_memory action=delete params={ id: "obs_xxx" }
```

## MCP Resources

The server exposes read-only resources that MCP clients can read directly:

| URI | Description |
|-----|-------------|
| `buildd://tasks/pending` | Pending tasks sorted by priority |
| `buildd://workspace/memory` | Recent workspace observations |
| `buildd://workspace/skills` | Available skills |

## Observability Events

Workers can emit custom events to their timeline using `emit_event`, and read them back with `query_events`. Events piggyback on the existing milestones system — no additional setup needed.

Use cases:
- Record deployment milestones
- Track build/test results
- Log decision points for later review

## Worker Workflow

The typical MCP workflow:

1. **`buildd` action=list_tasks** — see what's available
2. **`buildd` action=claim_task** — claim a task, read the included memory
3. **`git checkout <branch>`** — switch to the worker branch
4. **`buildd_memory` action=search** — search for context on unfamiliar files
5. Do the work, saving observations with **`buildd_memory` action=save** as you go
6. **`buildd` action=update_progress** — report at milestones (check for admin instructions in response)
7. **`git push`** — push your commits
8. **`buildd` action=create_pr** — create a pull request (use this instead of `gh pr create`)
9. **`buildd` action=complete_task** — mark the task as done
